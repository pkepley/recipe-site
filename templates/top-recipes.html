<!DOCTYPE html>
<html>
  <head>
    <title>Top Scheduled Recipes</title>
    {% include 'common-loads.html' %}
    <link rel="stylesheet" href="/recipe-site/static/main.css">
    <script src="/recipe-site/static/main.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>Top Scheduled Recipes</h1>

      {% if top_recipes and top_recipes|length > 0 %}
      <p>
        Showing page {{ page }} of {{ total_pages }} ({{ total_recipes }} recipes total)
      </p>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">
              <a href="?page=1&per_page={{ per_page }}&sort=name&direction={% if sort_key == 'name' and sort_direction == 'asc' %}desc{% else %}asc{% endif %}">
                Recipe
              </a>
            </th>
            <th scope="col">
              <a href="?page=1&per_page={{ per_page }}&sort=times&direction={% if sort_key == 'times' and sort_direction == 'desc' %}asc{% else %}desc{% endif %}">
                Times Cooked
              </a>
            </th>
            <th scope="col">
              <a href="?page=1&per_page={{ per_page }}&sort=last&direction={% if sort_key == 'last' and sort_direction == 'desc' %}asc{% else %}desc{% endif %}">
                Last Cooked
              </a>
            </th>
          </tr>
        </thead>
        <tbody>
          {% for row in top_recipes %}
          <tr>
            <td>
              <a href="/recipe-site/recipe/{{ row.recipe_id }}">
                {{ row.recipe_name }}
              </a>
            </td>
            <td>{{ row.times_cooked }}</td>
            <td>{{ row.last_cooked }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <nav aria-label="Top recipes pagination">
        <ul class="pagination">
          <li class="page-item {% if not has_prev %}disabled{% endif %}">
            <a class="page-link" href="?page={{ page - 1 }}&per_page={{ per_page }}" tabindex="-1" aria-disabled="{{ not has_prev }}">
              Previous
            </a>
          </li>
          <li class="page-item disabled">
            <span class="page-link">
              Page {{ page }} of {{ total_pages }}
            </span>
          </li>
          <li class="page-item {% if not has_next %}disabled{% endif %}">
            <a class="page-link" href="?page={{ page + 1 }}&per_page={{ per_page }}" aria-disabled="{{ not has_next }}">
              Next
            </a>
          </li>
        </ul>
      </nav>
      {% else %}
      <p>No recipes have been scheduled yet.</p>
      {% endif %}

      <p class="mt-3">
        <a href="/recipe-site/">
          &larr; Back to home
        </a>
      </p>
    </div>
  </body>
</html>

