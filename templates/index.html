<!DOCTYPE html>
<html>
  <head>
    <title>Recipe Site</title>
    {% include 'common-loads.html' %}
    <link rel="stylesheet" href="/recipe-site/static/main.css">
    <script src="/recipe-site/static/main.js"></script>
  </head>
  <body onload="onLoadPage()">
    <div class="container">
    <h1>Recipe Site</h1>
    <!--
    <div id="todays_div">
      {% if todays_recipe_id != "NONE" %}
      <h2><i class="bi bi-calendar-event"></i> View Today's Scheduled Recipe</h2>
      <script>todays_recipe_id = {{todays_recipe_id}}</script>
      <button class="btn btn-primary" onclick="todaysRecipeRedirect()" style='width="50%"'>Show Recipe</button>
      {% endif %}
    </div>
    -->
    <br />
    <div id="weekly_schedule_div">
      <h2><i class="bi bi-calendar-week"></i> This Week's Scheduled Recipes</h2>
      {% if weekly_schedule and weekly_schedule|length > 0 %}
      <!-- <p>Week starting {{ week_start }}</p> -->
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Day</th>
            <th scope="col">Recipe</th>
          </tr>
        </thead>
        <tbody>
          {% for row in weekly_schedule %}
          <tr class="{% if row.scheduled_day == today %}table-warning{% endif %}">
            <td>{{ row.scheduled_day }}</td>
            <td>{{ weekdays[row.day_of_week] }}</td>
            <td>
              <a href="/recipe-site/recipe/{{ row.recipe_id }}">{{ row.recipe_name }}</a>
              {% if row.quantity is not none and row.quantity|int > 1 %}
                (x{{ row.quantity }})
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No recipes scheduled for this week (starting {{ week_start }}).</p>
      {% endif %}
      <p>
        <a href="/recipe-site/recipe-scheduler/">
          <i class="bi bi-pencil"></i> Edit this week's schedule
        </a>
      </p>
    </div>
    <br />
    <div id="selection_div">
      <h2><i class="bi bi-search"></i> View a Recipe</h2>
      <select id="recipe_list" name="recipe">
        <option disabled selected value> -- select an option -- </option>
	      {% for recipe_name in recipe_name %}
	      <option value="{{recipe_id[loop.index0]}}"> {{recipe_name}} </option>
	      {% endfor %}
      </select>
      <button class="btn btn-primary" onclick="recipeRedirect()">Show Recipe</button>
    </div>    
    <br />
    <!--
    <div>
      <h2><i class="bi bi-calendar-week"></i> Recipe Scheduler</h2>
      <p> Schedule some recipes! </p>
      <button class="btn btn-primary" onclick="scheduleRedirect()">Go!</button>
    </div>
    -->
    <br />
    <div>
      <h2><i class="bi bi-list-ol"></i> Grocery List Builder</h2>
      <p>Build a grocery list! </p>
      <button class="btn btn-primary" onclick="window.location.href='/recipe-site/grocery-list/'">Go!</button>
    </div>
  </div>
  </body>
</html>
